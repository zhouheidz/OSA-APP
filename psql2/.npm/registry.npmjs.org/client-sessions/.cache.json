{"_id":"client-sessions","_rev":"61-55c667e770733e609c501b987d3c6d21","name":"client-sessions","description":"secure sessions stored in cookies","dist-tags":{"latest":"0.7.0"},"versions":{"0.0.2":{"name":"client-sessions","version":"0.0.2","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"git://github.com/benadida/node-client-sessions.git"},"dependencies":{"vows":"0.5.13","cookies":"https://github.com/benadida/cookies/tarball/d2f0f0b3","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"0.12.9","node-proxy":"0.5.2"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"./scripts/run_all_tests.sh"},"engines":{"node":">= 0.6.5"},"_npmUser":{"name":"benadida","email":"ben@adida.net"},"_id":"client-sessions@0.0.2","devDependencies":{},"_engineSupported":true,"_npmVersion":"1.1.0-beta-4","_nodeVersion":"v0.6.6","_defaultsLoaded":true,"dist":{"shasum":"f25822abb19e24d56d22e4136c3a4285857c238f","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.0.2.tgz"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.0.3":{"name":"client-sessions","version":"0.0.3","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"git://github.com/benadida/node-client-sessions.git"},"dependencies":{"cookies":"https://github.com/benadida/cookies/tarball/d2f0f0b3","node-proxy":"0.5.2"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"0.12.9"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"./scripts/run_all_tests.sh"},"engines":{"node":">= 0.6.5"},"_npmUser":{"name":"benadida","email":"ben@adida.net"},"_id":"client-sessions@0.0.3","_engineSupported":true,"_npmVersion":"1.1.0-alpha-6","_nodeVersion":"v0.6.5","_defaultsLoaded":true,"dist":{"shasum":"b27a97e87b4faa7af44c88491701188df623ceb6","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.0.3.tgz"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.0.4":{"name":"client-sessions","version":"0.0.4","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"git://github.com/benadida/node-client-sessions.git"},"dependencies":{"cookies":"https://github.com/benadida/cookies/tarball/d2f0f0b3","node-proxy":"0.5.2"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"0.12.9"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"./scripts/run_all_tests.sh"},"engines":{"node":">= 0.6.5"},"_npmUser":{"name":"benadida","email":"ben@adida.net"},"_id":"client-sessions@0.0.4","_engineSupported":true,"_npmVersion":"1.1.0-alpha-6","_nodeVersion":"v0.6.5","_defaultsLoaded":true,"dist":{"shasum":"f778a9e00681e230774a06f74e97e906d58229a4","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.0.4.tgz"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.0.5":{"name":"client-sessions","version":"0.0.5","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"git://github.com/benadida/node-client-sessions.git"},"dependencies":{"cookies":"https://github.com/benadida/cookies/tarball/d2f0f0b3","node-proxy":"0.5.2"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"0.12.9"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"./scripts/run_all_tests.sh"},"engines":{"node":">= 0.6.5"},"_npmUser":{"name":"benadida","email":"ben@adida.net"},"_id":"client-sessions@0.0.5","_engineSupported":true,"_npmVersion":"1.1.0-alpha-6","_nodeVersion":"v0.6.5","_defaultsLoaded":true,"dist":{"shasum":"ba0ad58f86187c4bed628785fa9d9fee3ba0f0fe","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.0.5.tgz"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.0.6":{"name":"client-sessions","version":"0.0.6","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"git://github.com/benadida/node-client-sessions.git"},"dependencies":{"cookies":"https://github.com/benadida/cookies/tarball/d2f0f0b3","node-proxy":"0.5.2"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"0.12.9"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"./scripts/run_all_tests.sh"},"engines":{"node":">= 0.6.5"},"_npmUser":{"name":"benadida","email":"ben@adida.net"},"_id":"client-sessions@0.0.6","_engineSupported":true,"_npmVersion":"1.1.0-alpha-6","_nodeVersion":"v0.6.5","_defaultsLoaded":true,"dist":{"shasum":"8985fbeebfaf2da77bd23f1ff2e387f5f8abb059","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.0.6.tgz"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.0.7":{"name":"client-sessions","version":"0.0.7","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"git://github.com/benadida/node-client-sessions.git"},"dependencies":{"cookies":"https://github.com/benadida/cookies/tarball/d2f0f0b3","node-proxy":"0.5.2"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"0.12.9"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"./scripts/run_all_tests.sh"},"engines":{"node":">= 0.6.5"},"_npmUser":{"name":"benadida","email":"ben@adida.net"},"_id":"client-sessions@0.0.7","_engineSupported":true,"_npmVersion":"1.1.0-alpha-6","_nodeVersion":"v0.6.5","_defaultsLoaded":true,"dist":{"shasum":"6add1a2b40f0c147ec23ce45da1eb9be42bd5cc9","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.0.7.tgz"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.0.8":{"name":"client-sessions","version":"0.0.8","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/benadida/node-client-sessions"},"dependencies":{"cookies":"https://github.com/benadida/cookies/tarball/d2f0f0b3","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"0.12.9"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"./scripts/run_all_tests.sh"},"engines":{"node":">= 0.6.5"},"_id":"client-sessions@0.0.8","dist":{"shasum":"2d59b6174d0e4cfa8e10f2c472d9a3612c748c1d","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.0.8.tgz"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.0.9":{"name":"client-sessions","version":"0.0.9","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/benadida/node-client-sessions"},"dependencies":{"cookies":"https://github.com/benadida/cookies/tarball/d2f0f0b3","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.3.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.6.5"},"_id":"client-sessions@0.0.9","dist":{"shasum":"5dd2c770c53f5f203c1a60df4e29ab59dcc98674","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.0.9.tgz"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.1.0":{"name":"client-sessions","version":"0.1.0","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.2.1","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"_id":"client-sessions@0.1.0","dist":{"shasum":"6cea0d0291b659d7ca5715dfd1eb642e3291d41d","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.1.0.tgz"},"_npmVersion":"1.1.69","_npmUser":{"name":"benadida","email":"ben@adida.net"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.1.1":{"name":"client-sessions","version":"0.1.1","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.2.1","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"_id":"client-sessions@0.1.1","dist":{"shasum":"9cbe1fd6d382881b3fcc1ac8e391c34748c24646","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.1.1.tgz"},"_npmVersion":"1.1.69","_npmUser":{"name":"benadida","email":"ben@adida.net"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.2.0":{"name":"client-sessions","version":"0.2.0","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.2.1","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"_id":"client-sessions@0.2.0","dist":{"shasum":"64bb75b49490f0cf0d1748f5ddda5e3458d6ddf5","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.2.0.tgz"},"_npmVersion":"1.1.69","_npmUser":{"name":"benadida","email":"ben@adida.net"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.3.0":{"name":"client-sessions","version":"0.3.0","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.2.1","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"_id":"client-sessions@0.3.0","dist":{"shasum":"6c9993858b2009416247ae70051b88a1d5e6ee7d","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.3.0.tgz"},"_npmVersion":"1.1.69","_npmUser":{"name":"benadida","email":"ben@adida.net"},"maintainers":[{"name":"benadida","email":"ben@adida.net"}],"directories":{}},"0.3.1":{"name":"client-sessions","version":"0.3.1","private":false,"description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.2.1","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.5.13","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"bugs":{"url":"https://github.com/mozilla/node-client-sessions/issues"},"_id":"client-sessions@0.3.1","dist":{"shasum":"91d2167a230f753110247bdd46a12bd9c6ed35ed","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.3.1.tgz"},"_from":".","_npmVersion":"1.2.23","_npmUser":{"name":"lloyd","email":"lloyd@hilaiel.com"},"maintainers":[{"name":"benadida","email":"ben@adida.net"},{"name":"lloyd","email":"lloyd@hilaiel.com"}],"directories":{}},"0.4.0":{"name":"client-sessions","version":"0.4.0","description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.3.6","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.7.0","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"licenses":{"type":"MPL 2.0","url":"https://raw.github.com/mozilla/node-client-sessions/master/LICENSE"},"bugs":{"url":"https://github.com/mozilla/node-client-sessions/issues"},"_id":"client-sessions@0.4.0","dist":{"shasum":"eeefd25e0351176d61704daf76612a6193f108e4","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.4.0.tgz"},"_from":".","_npmVersion":"1.3.11","_npmUser":{"name":"seanmonstar","email":"sean.monstar@gmail.com"},"maintainers":[{"name":"benadida","email":"ben@adida.net"},{"name":"lloyd","email":"lloyd@hilaiel.com"},{"name":"seanmonstar","email":"sean.monstar@gmail.com"}],"directories":{}},"0.4.1":{"name":"client-sessions","version":"0.4.1","description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.3.6","node-proxy":"0.6.0"},"devDependencies":{"vows":"0.7.0","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"licenses":{"type":"MPL 2.0","url":"https://raw.github.com/mozilla/node-client-sessions/master/LICENSE"},"bugs":{"url":"https://github.com/mozilla/node-client-sessions/issues"},"_id":"client-sessions@0.4.1","dist":{"shasum":"03648060bb28708356ac563fb1f6fd2ea6543b3b","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.4.1.tgz"},"_from":".","_npmVersion":"1.3.11","_npmUser":{"name":"seanmonstar","email":"sean.monstar@gmail.com"},"maintainers":[{"name":"benadida","email":"ben@adida.net"},{"name":"lloyd","email":"lloyd@hilaiel.com"},{"name":"seanmonstar","email":"sean.monstar@gmail.com"}],"directories":{}},"0.5.0":{"name":"client-sessions","version":"0.5.0","description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.3.8"},"devDependencies":{"vows":"0.7.0","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"licenses":{"type":"MPL 2.0","url":"https://raw.github.com/mozilla/node-client-sessions/master/LICENSE"},"bugs":{"url":"https://github.com/mozilla/node-client-sessions/issues"},"_id":"client-sessions@0.5.0","dist":{"shasum":"5474edc4080b707c8dd47e0ba53b6c372f90ae84","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.5.0.tgz"},"_from":".","_npmVersion":"1.3.11","_npmUser":{"name":"seanmonstar","email":"sean.monstar@gmail.com"},"maintainers":[{"name":"benadida","email":"ben@adida.net"},{"name":"lloyd","email":"lloyd@hilaiel.com"},{"name":"seanmonstar","email":"sean.monstar@gmail.com"}],"directories":{}},"0.6.0":{"name":"client-sessions","version":"0.6.0","description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.3.8"},"devDependencies":{"vows":"0.7.0","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"licenses":{"type":"MPL 2.0","url":"https://raw.github.com/mozilla/node-client-sessions/master/LICENSE"},"bugs":{"url":"https://github.com/mozilla/node-client-sessions/issues"},"_id":"client-sessions@0.6.0","dist":{"shasum":"b19bb5d09f0abc7d96c237982dcf12b7017e7b43","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.6.0.tgz"},"_from":".","_npmVersion":"1.3.11","_npmUser":{"name":"seanmonstar","email":"sean.monstar@gmail.com"},"maintainers":[{"name":"benadida","email":"ben@adida.net"},{"name":"lloyd","email":"lloyd@hilaiel.com"},{"name":"seanmonstar","email":"sean.monstar@gmail.com"}],"directories":{}},"0.7.0":{"name":"client-sessions","version":"0.7.0","description":"secure sessions stored in cookies","main":"lib/client-sessions","repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"dependencies":{"cookies":"0.5.0"},"devDependencies":{"vows":"0.7.0","express":"2.5.0","tobi":"https://github.com/Cowboy-coder/tobi/tarball/fd733a3","zombie":"1.4.1"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"scripts":{"test":"vows --spec"},"engines":{"node":">= 0.8.0"},"licenses":{"type":"MPL 2.0","url":"https://raw.github.com/mozilla/node-client-sessions/master/LICENSE"},"bugs":{"url":"https://github.com/mozilla/node-client-sessions/issues"},"homepage":"https://github.com/mozilla/node-client-sessions","_id":"client-sessions@0.7.0","dist":{"shasum":"1721e7e8df6ddfd50369f66f9db8ada0cc480270","tarball":"https://registry.npmjs.org/client-sessions/-/client-sessions-0.7.0.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"seanmonstar","email":"sean.monstar@gmail.com"},"maintainers":[{"name":"benadida","email":"ben@adida.net"},{"name":"lloyd","email":"lloyd@hilaiel.com"},{"name":"seanmonstar","email":"sean.monstar@gmail.com"}],"directories":{}}},"readme":"[![build status](https://secure.travis-ci.org/mozilla/node-client-sessions.png)](http://travis-ci.org/mozilla/node-client-sessions)\r\n\r\nclient-sessions is connect middleware that implements sessions in encrypted tamper-free cookies.  For a complete introduction to encrypted client side sessions, refer to [Francois Marier's blog post on the subject][];\r\n\r\n[Francois Marier's blog post on the subject]: https://hacks.mozilla.org/2012/12/using-secure-client-side-sessions-to-build-simple-and-scalable-node-js-applications-a-node-js-holiday-season-part-3/\r\n\r\n**NOTE:** It is not recommended using both this middleware and connect's built-in session middleware.\r\n\r\n## Usage\r\n\r\nBasic usage:\r\n\r\n```js\r\nvar sessions = require(\"client-sessions\");\r\napp.use(sessions({\r\n  cookieName: 'mySession', // cookie name dictates the key name added to the request object\r\n  secret: 'blargadeeblargblarg', // should be a large unguessable string\r\n  duration: 24 * 60 * 60 * 1000, // how long the session will stay valid in ms\r\n  activeDuration: 1000 * 60 * 5 // if expiresIn < activeDuration, the session will be extended by activeDuration milliseconds\r\n}));\r\n\r\napp.use(function(req, res, next) {\r\n  if (req.mySession.seenyou) {\r\n    res.setHeader('X-Seen-You', 'true');\r\n  } else {\r\n    // setting a property will automatically cause a Set-Cookie response\r\n    // to be sent\r\n    req.mySession.seenyou = true;\r\n    res.setHeader('X-Seen-You', 'false');\r\n  }\r\n});\r\n```\r\n\r\nYou can control more specific cookie behavior during setup:\r\n\r\n```js\r\napp.use(sessions({\r\n  cookieName: 'mySession', // cookie name dictates the key name added to the request object\r\n  secret: 'blargadeeblargblarg', // should be a large unguessable string\r\n  duration: 24 * 60 * 60 * 1000, // how long the session will stay valid in ms\r\n  cookie: {\r\n    path: '/api', // cookie will only be sent to requests under '/api'\r\n    maxAge: 60000, // duration of the cookie in milliseconds, defaults to duration above\r\n    ephemeral: false, // when true, cookie expires when the browser closes\r\n    httpOnly: true, // when true, cookie is not accessible from javascript\r\n    secure: false // when true, cookie will only be sent over SSL. use key 'secureProxy' instead if you handle SSL not in your node process\r\n  }\r\n}));\r\n```\r\n\r\nYou can have multiple cookies:\r\n\r\n```js\r\n// a 1 week session\r\napp.use(sessions({\r\n  cookieName: 'shopping_cart',\r\n  secret: 'first secret',\r\n  duration: 7 * 24 * 60 * 60 * 1000\r\n}));\r\n\r\n// a 2 hour encrypted session\r\napp.use(sessions({\r\n  cookieName: 'authenticated',\r\n  secret: 'first secret',\r\n  duration: 2 * 60 * 60 * 1000\r\n}));\r\n```\r\n\r\nIn this example, there's a 2 hour authentication session, but shopping carts persist for a week.\r\n\r\nFinally, you can use requestKey to force the name where information can be accessed on the request object.\r\n\r\n```js\r\nvar sessions = require(\"client-sessions\");\r\napp.use(sessions({\r\n  cookieName: 'mySession',\r\n  requestKey: 'forcedSessionKey', // requestKey overrides cookieName for the key name added to the request object.\r\n  secret: 'blargadeeblargblarg', // should be a large unguessable string or Buffer\r\n  duration: 24 * 60 * 60 * 1000, // how long the session will stay valid in ms\r\n}));\r\n\r\napp.use(function(req, res, next) {\r\n  // requestKey forces the session information to be\r\n  // accessed via forcedSessionKey\r\n  if (req.forcedSessionKey.seenyou) {\r\n    res.setHeader('X-Seen-You', 'true');\r\n  }\r\n  next();\r\n});\r\n```\r\n\r\n## Cryptography\r\n\r\nA pair of encryption and signature keys are derived from the `secret` option\r\nvia HMAC-SHA-256; the `secret` isn't used directly to encrypt or compute the\r\nMAC.\r\n\r\nThe key-derivation function, in pseudocode:\r\n\r\n```text\r\n  encKey := HMAC-SHA-256(secret, 'cookiesession-encryption');\r\n  sigKey := HMAC-SHA-256(secret, 'cookiesession-signature');\r\n```\r\n\r\nThe **AES-256-CBC** cipher is used to encrypt the session contents, with an\r\n**HMAC-SHA-256** authentication tag (via **Encrypt-then-Mac** composition).  A\r\nrandom 128-bit Initialization Vector (IV) is generated for each encryption\r\noperation (this is the AES block size regardless of the key size).  The\r\nCBC-mode input is padded with the usual PKCS#5 scheme.\r\n\r\nIn pseudocode, the encryption looks like the following, with `||` denoting\r\nconcatenation. The `createdAt` and `duration` parameters are decimal strings.\r\n\r\n```text\r\n  iv := secureRandom(16 bytes)\r\n  ciphertext := AES-256-CBC(encKey, iv, sessionJson)\r\n  payload := iv || '.' || ciphertext || '.' || createdAt || '.' || duration\r\n  hmac := HMAC-SHA-256(sigKey, payload)\r\n  cookie := base64url(iv) || '.' ||\r\n    base64url(ciphertext) || '.' ||\r\n    createdAt || '.' ||\r\n    duration || '.' ||\r\n    base64url(hmac)\r\n```\r\n\r\nFor decryption, a constant-time equality operation is used to verify the HMAC\r\noutput to avoid the plausible timing attack.\r\n\r\n### Advanced Cryptographic Options\r\n\r\nThe defaults are secure, but may not suit your requirements. Some example scenarios:\r\n- You want to use randomly-generated keys instead of using the key-derivation\r\n  function used in this module.\r\n- AES-256 is overkill for the type of data you store in the session (e.g. not\r\n  personally-identifiable or sensitive) and you'd like to trade-off decreasing\r\n  the security level for CPU economy.\r\n- SHA-256 is maybe too weak for your application and you want to have more\r\n  MAC security by using SHA-512, which grows the size of your cookies slightly.\r\n\r\nIf the defaults don't suit your needs, you can customize client-sessions.\r\n**Beware: Changing keys and/or algorithms will make previously-generated\r\nCookies invalid!**\r\n\r\n#### Configuring Keys\r\n\r\nTo configure independent encryption and signature (HMAC) keys:\r\n\r\n```js\r\napp.use(sessions({\r\n  encryptionKey: loadFromKeyStore('session-encryption-key'),\r\n  signatureKey: loadFromKeyStore('session-signature-key'),\r\n  // ... other options discussed above ...\r\n}));\r\n```\r\n\r\n#### Configuring Algorithms\r\n\r\nTo specify custom algorithms and keys:\r\n\r\n```js\r\napp.use(sessions({\r\n  // use WEAKER-than-default encryption:\r\n  encryptionAlgorithm: 'aes128',\r\n  encryptionKey: loadFromKeyStore('session-encryption-key'),\r\n  // use a SHORTER-than-default MAC:\r\n  signatureAlgorithm: 'sha256-drop128',\r\n  signatureKey: loadFromKeyStore('session-signature-key'),\r\n  // ... other options discussed above ...\r\n}));\r\n```\r\n\r\n#### Encryption Algorithms\r\n\r\nSupported CBC-mode `encryptionAlgorithm`s (and key length requirements):\r\n\r\n| Cipher | Key length |\r\n| ------ | ---------- |\r\n| aes128 | 16 bytes   |\r\n| aes192 | 24 bytes   |\r\n| aes256 | 32 bytes   |\r\n\r\nThese key lengths are exactly as required by the [Advanced Encryption\r\nStandard](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard).\r\n\r\n#### Signature (HMAC) Algorithms\r\n\r\nSupported HMAC `signatureAlgorithm`s (and key length requirements):\r\n\r\n| HMAC           | Minimum Key Length | Maximum Key Length |\r\n| -------------- | ------------------ | ------------------ |\r\n| sha256         | 32 bytes           | 64 bytes           |\r\n| sha256-drop128 | 32 bytes           | 64 bytes           |\r\n| sha384         | 48 bytes           | 128 bytes          |\r\n| sha384-drop192 | 48 bytes           | 128 bytes          |\r\n| sha512         | 64 bytes           | 128 bytes          |\r\n| sha512-drop256 | 64 bytes           | 128 bytes          |\r\n\r\nThe HMAC key length requirements are derived from [RFC 2104 section\r\n3](https://tools.ietf.org/html/rfc2104#section-3). The maximum key length can\r\nbe exceeded, but it doesn't increase the security of the signature.\r\n\r\nThe `-dropN` algorithms discard the latter half of the HMAC output, which\r\nprovides some additional protection against SHA2 length-extension attacks on\r\ntop of HMAC. The same technique is used in the upcoming [JSON Web Algorithms\r\n`AES_CBC_HMAC_SHA2` authenticated\r\ncipher](http://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms-19#section-5.2).\r\n\r\n#### Generating Keys\r\n\r\nOne can easily generate both AES and HMAC-SHA2 keys via command line: `openssl\r\nrand -base64 32` for a 32-byte (256-bit) key.  It's easy to then parse that\r\noutput into a `Buffer`:\r\n\r\n```js\r\nfunction loadKeyFromStore(name) {\r\n  var text = myConfig.keys[name];\r\n  return new Buffer(text, 'base64');\r\n}\r\n```\r\n\r\n#### Key Constraints\r\n\r\nIf you specify `encryptionKey` or `signatureKey`, you must supply the other as\r\nwell.\r\n\r\nThe following constraints must be met or an `Error` will be thrown:\r\n\r\n1. both keys must be `Buffer`s.\r\n2. the keys must be _different_.\r\n3. the encryption key are _exactly_ the length required (see above).\r\n4. the signature key has _at least_ the length required (see above).\r\n\r\nBased on the above, please note that if you specify a `secret` _and_ a\r\n`signatureAlgorithm`, you need to use `sha256` or `sha256-drop128`.\r\n\r\n## License\r\n\r\n> This Source Code Form is subject to the terms of the Mozilla Public\r\n> License, v. 2.0. If a copy of the MPL was not distributed with this\r\n> file, You can obtain one at http://mozilla.org/MPL/2.0/.\r\n","maintainers":[{"name":"benadida","email":"ben@adida.net"},{"name":"lloyd","email":"lloyd@hilaiel.com"},{"name":"seanmonstar","email":"sean.monstar@gmail.com"}],"time":{"modified":"2014-09-15T16:18:15.787Z","created":"2012-01-05T03:18:43.847Z","0.0.2":"2012-01-05T03:18:45.407Z","0.0.3":"2012-01-19T20:07:53.004Z","0.0.4":"2012-03-14T02:29:01.119Z","0.0.5":"2012-03-15T04:37:22.522Z","0.0.6":"2012-04-19T00:41:48.943Z","0.0.7":"2012-05-02T14:07:28.682Z","0.0.8":"2012-07-27T20:26:45.738Z","0.0.9":"2012-09-12T16:48:41.886Z","0.1.0":"2013-03-19T00:05:14.652Z","0.1.1":"2013-03-20T21:59:32.367Z","0.2.0":"2013-04-22T16:33:27.814Z","0.3.0":"2013-05-13T23:53:53.494Z","0.3.1":"2013-05-31T17:08:34.658Z","0.4.0":"2013-11-04T23:58:42.736Z","0.4.1":"2013-11-19T17:56:16.389Z","0.5.0":"2013-12-16T18:28:17.843Z","0.6.0":"2014-01-08T23:08:54.192Z","0.7.0":"2014-09-15T16:18:15.787Z"},"author":{"name":"Ben Adida","email":"ben@adida.net"},"repository":{"type":"git","url":"https://github.com/mozilla/node-client-sessions"},"users":{"fgribreau":true,"goinstant":true,"mitica":true,"phajej":true,"ralucas":true,"phanimahesh":true,"abimohiosen":true,"sanketss84":true,"boyw165":true,"vwal":true,"almccann":true,"honzajde":true,"tobiasnickel":true,"nickeltobias":true,"vitorazevedo":true,"ftopf":true,"andrewgeorge":true},"homepage":"https://github.com/mozilla/node-client-sessions","bugs":{"url":"https://github.com/mozilla/node-client-sessions/issues"},"readmeFilename":"README.md","_attachments":{},"_etag":"W/\"54171147-71c1\"","_lastModified":"Mon, 15 Sep 2014 16:18:15 GMT"}